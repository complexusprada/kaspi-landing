---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Logo from '../components/Logo.astro';
import Button from '../components/Button.astro';
import Card from '../components/Card.astro';
import LanguageSwitcher from '../components/LanguageSwitcher.astro';
import PriceRaceDemo from '../components/PriceRaceDemo.astro';

// Icons
import Clock from '../components/icons/Clock.astro';
import TrendingDown from '../components/icons/TrendingDown.astro';
import ShoppingCart from '../components/icons/ShoppingCart.astro';
import FileText from '../components/icons/FileText.astro';
import Eye from '../components/icons/Eye.astro';
import Zap from '../components/icons/Zap.astro';
import MapPin from '../components/icons/MapPin.astro';
import Plug from '../components/icons/Plug.astro';
import Link2 from '../components/icons/Link2.astro';
import Settings from '../components/icons/Settings.astro';
import PlayCircle from '../components/icons/PlayCircle.astro';
import TrendingUp from '../components/icons/TrendingUp.astro';
import Timer from '../components/icons/Timer.astro';
import Shield from '../components/icons/Shield.astro';
import Layers from '../components/icons/Layers.astro';
import Check from '../components/icons/Check.astro';
import MessageCircle from '../components/icons/MessageCircle.astro';
import Phone from '../components/icons/Phone.astro';

import { getTranslations } from '../i18n/utils';

const lang = 'ru';
const t = getTranslations(lang);
const appUrl = import.meta.env.PUBLIC_APP_URL || 'https://app.kaspirace.kz';

const contactPhone = '87777518809';
const whatsappLink = `https://wa.me/${contactPhone.replace(/^8/, '7')}`;
// const telegramLink = `https://t.me/+${contactPhone.replace(/^8/, '7')}`;

const plans = [
  { name: '–°—Ç–∞—Ä—Ç', price: '10 000', cities: 1, products: 200, turbo: 3 },
  { name: '–ú–µ–¥–∏—É–º', price: '20 000', cities: 1, products: 400, turbo: 5 },
  { name: '–≠–∫—Å–ø–µ—Ä—Ç', price: '30 000', cities: 1, products: 800, turbo: 7, popular: true },
  { name: '–ì—É—Ä—É', price: '40 000', cities: 1, products: 1600, turbo: 9 },
];
---

<Layout title={t.meta.title} description={t.meta.description} lang={lang}>
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "KASPIRACE",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web",
    "description": t.meta.description,
    "url": "https://kaspirace.kz",
    "offers": {
      "@type": "AggregateOffer",
      "lowPrice": "10000",
      "highPrice": "40000",
      "priceCurrency": "KZT"
    },
    "provider": {
      "@type": "Organization",
      "name": "–ò–ü UQB",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "–ê—Å—Ç–∞–Ω–∞",
        "streetAddress": "—É–ª. –ê–±–µ–∫–µ–Ω –ë–µ–∫—Ç—É—Ä–æ–≤–∞",
        "addressCountry": "KZ"
      },
      "telephone": "+77777518809",
      "url": "https://kaspirace.kz"
    }
  })} />
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": t.faq.q1.question,
        "acceptedAnswer": { "@type": "Answer", "text": t.faq.q1.answer }
      },
      {
        "@type": "Question",
        "name": t.faq.q2.question,
        "acceptedAnswer": { "@type": "Answer", "text": t.faq.q2.answer }
      },
      {
        "@type": "Question",
        "name": t.faq.q3.question,
        "acceptedAnswer": { "@type": "Answer", "text": t.faq.q3.answer }
      },
      {
        "@type": "Question",
        "name": t.faq.q4.question,
        "acceptedAnswer": { "@type": "Answer", "text": t.faq.q4.answer }
      },
      {
        "@type": "Question",
        "name": t.faq.q5.question,
        "acceptedAnswer": { "@type": "Answer", "text": t.faq.q5.answer }
      }
    ]
  })} />
  <div class="min-h-screen bg-background">
    <!-- Promo Banner -->
    <div class="bg-gradient-to-r from-primary to-[#D52027] text-primary-foreground py-2 px-4 text-center text-sm sticky top-0 z-50">
      <span class="hidden sm:inline">üéÅ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ </span>
      <span class="sm:hidden">üéÅ –ü—Ä–æ–º–æ–∫–æ–¥ </span>
      <code class="bg-white/20 px-2 py-0.5 rounded font-bold mx-1">FREETEST</code>
      <span class="hidden sm:inline"> –∏ –ø–æ–ª—É—á–∏—Ç–µ 3 –¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞!</span>
      <span class="sm:hidden"> = 3 –¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ!</span>
    </div>

    <Header
      lang={lang}
      instructionsHref="/instructions"
      loginHref={`${appUrl}/login`}
      instructionsLabel={t.common.instructions}
      loginLabel={t.common.login}
      hasPromoBanner
    />

    <!-- Hero Section -->
    <section class="container mx-auto px-4 py-8">
      <div class="max-w-6xl mx-auto text-center space-y-6">
        <div class="flex justify-center">
          <Logo size="lg" />
        </div>
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight max-w-2xl mx-auto" style="text-wrap: balance;">
          {t.hero.title}
        </h1>
        <p class="text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto">
          {t.hero.subtitle}
        </p>

        <!-- Feature checklist -->
        <div class="flex flex-wrap justify-center gap-x-6 gap-y-2 text-sm">
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.tracking.title}</span>
          </div>
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.automated.title}</span>
          </div>
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.multicity.title}</span>
          </div>
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.minmax.title}</span>
          </div>
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.excel.title}</span>
          </div>
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.autoincrement.title}</span>
          </div>
          <div class="flex items-center gap-2">
            <Check class="w-4 h-4 text-green-500 shrink-0" />
            <span>{t.features.turbo.title}</span>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button size="lg" class="text-lg" href={`${appUrl}/login`}>
            {t.hero.cta_primary}
          </Button>
          <Button size="lg" variant="outline" class="text-lg" href="#how-it-works">
            {t.hero.cta_secondary}
          </Button>
        </div>

        <p class="text-sm text-muted-foreground">
          {t.hero.trust_badge}
        </p>

        <!-- Demo -->
        <div class="pt-8">
          <PriceRaceDemo lang={lang} />
        </div>
      </div>
    </section>


    <!-- How It Works Section -->
    <section id="how-it-works" class="bg-muted/50 py-20 overflow-hidden">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4 hiw-fade-in">
            {t.how_it_works.title}
          </h2>
          <p class="text-xl text-muted-foreground hiw-fade-in" style="animation-delay: 0.1s">
            {t.how_it_works.subtitle}
          </p>
        </div>

        <div class="max-w-5xl mx-auto">
          <div class="grid md:grid-cols-3 gap-8 md:gap-6 relative">
              <!-- Arrow 1->2 (hidden on mobile) -->
              <div class="hidden md:flex absolute top-8 left-[33%] -translate-x-1/2 items-center hiw-arrow" style="animation-delay: 0.5s">
                <div class="w-12 h-0.5 bg-gradient-to-r from-primary to-primary/50"></div>
                <svg class="w-4 h-4 text-primary/50 -ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </div>

              <!-- Arrow 2->3 (hidden on mobile) -->
              <div class="hidden md:flex absolute top-8 left-[67%] -translate-x-1/2 items-center hiw-arrow" style="animation-delay: 0.7s">
                <div class="w-12 h-0.5 bg-gradient-to-r from-primary to-primary/50"></div>
                <svg class="w-4 h-4 text-primary/50 -ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </div>

              <!-- Step 1 -->
              <div class="hiw-step relative" style="animation-delay: 0.2s">
                <div class="flex flex-col items-center text-center">
                  <!-- Icon -->
                  <div class="relative mb-6">
                    <div class="w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center hiw-icon">
                      <Link2 class="w-8 h-8 text-primary" />
                    </div>
                    <div class="absolute inset-0 rounded-2xl bg-primary/20 hiw-pulse"></div>
                  </div>

                  <!-- Content -->
                  <h3 class="text-xl font-semibold mb-3">{t.how_it_works.step1.title}</h3>
                  <p class="text-muted-foreground">{t.how_it_works.step1.description}</p>
                </div>
              </div>

              <!-- Step 2 -->
              <div class="hiw-step relative" style="animation-delay: 0.4s">
                <div class="flex flex-col items-center text-center">
                  <!-- Icon -->
                  <div class="relative mb-6">
                    <div class="w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center hiw-icon">
                      <Settings class="w-8 h-8 text-primary" />
                    </div>
                    <div class="absolute inset-0 rounded-2xl bg-primary/20 hiw-pulse" style="animation-delay: 0.3s"></div>
                  </div>

                  <!-- Content -->
                  <h3 class="text-xl font-semibold mb-3">{t.how_it_works.step2.title}</h3>
                  <p class="text-muted-foreground">{t.how_it_works.step2.description}</p>
                </div>
              </div>

              <!-- Step 3 -->
              <div class="hiw-step relative" style="animation-delay: 0.6s">
                <div class="flex flex-col items-center text-center">
                  <!-- Icon -->
                  <div class="relative mb-6">
                    <div class="w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center hiw-icon">
                      <PlayCircle class="w-8 h-8 text-primary" />
                    </div>
                    <div class="absolute inset-0 rounded-2xl bg-primary/20 hiw-pulse" style="animation-delay: 0.6s"></div>
                  </div>

                  <!-- Content -->
                  <h3 class="text-xl font-semibold mb-3">{t.how_it_works.step3.title}</h3>
                  <p class="text-muted-foreground">{t.how_it_works.step3.description}</p>
                </div>
              </div>
          </div>
        </div>

        <!-- Instructions CTA -->
        <div class="text-center mt-12 hiw-fade-in" style="animation-delay: 0.8s">
          <p class="text-muted-foreground mb-4">–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫–∞—Å–ø–∏ –±–æ—Ç–∞?</p>
          <Button size="lg" class="text-lg" href="/instructions">
            üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
          </Button>
        </div>
      </div>
    </section>

    <style>
      /* Fade in animation */
      .hiw-fade-in {
        animation: hiwFadeIn 0.6s ease-out forwards;
        opacity: 0;
      }

      @keyframes hiwFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Step animation */
      .hiw-step {
        animation: hiwStepIn 0.8s ease-out forwards;
        opacity: 0;
      }

      @keyframes hiwStepIn {
        from {
          opacity: 0;
          transform: translateY(40px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Pulse effect */
      .hiw-pulse {
        animation: hiwPulse 2s ease-out infinite;
      }

      @keyframes hiwPulse {
        0% {
          transform: scale(1);
          opacity: 0.5;
        }
        100% {
          transform: scale(1.8);
          opacity: 0;
        }
      }

      /* Icon hover animation */
      .hiw-icon {
        transition: all 0.3s ease;
      }

      .hiw-step:hover .hiw-icon {
        transform: scale(1.1) rotate(5deg);
        background-color: hsl(var(--primary) / 0.2);
      }

      /* Arrow animation */
      .hiw-arrow {
        animation: hiwArrowIn 0.6s ease-out forwards;
        opacity: 0;
      }

      @keyframes hiwArrowIn {
        from {
          opacity: 0;
          transform: translateX(-50%) translateX(-10px);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) translateX(0);
        }
      }
    </style>

    <!-- Pricing Section -->
    <section class="bg-muted/50 py-20 overflow-hidden">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4 pricing-fade-in">
            {t.pricing.title}
          </h2>
          <p class="text-xl text-muted-foreground pricing-fade-in" style="animation-delay: 0.1s">
            {t.pricing.subtitle}
          </p>
        </div>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-4 max-w-6xl mx-auto items-start">
          {plans.map((plan, index) => (
            <div
              class:list={[
                'pricing-card relative',
                plan.popular ? 'lg:-mt-4 lg:mb-4' : ''
              ]}
              style={`animation-delay: ${0.1 + index * 0.1}s`}
            >
              {/* Popular ribbon */}
              {plan.popular && (
                <div class="absolute -top-0 left-0 right-0 flex justify-center">
                  <div class="bg-gradient-to-r from-primary to-[#D52027] text-primary-foreground text-sm font-semibold px-6 py-2 rounded-b-xl shadow-lg pricing-ribbon">
                    {t.pricing.popular}
                  </div>
                </div>
              )}

              <Card class:list={[
                'relative p-6 pt-8 h-full transition-all duration-300',
                plan.popular
                  ? 'border-2 border-primary shadow-xl pricing-popular-card'
                  : 'hover:border-primary/50 hover:shadow-lg'
              ]}>
                {/* Glow effect for popular */}
                {plan.popular && (
                  <div class="absolute inset-0 rounded-xl bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"></div>
                )}

                <div class="relative">
                  {/* Plan name */}
                  <div class="text-center mb-6">
                    <h3 class="text-xl font-bold text-foreground">{plan.name}</h3>
                  </div>

                  {/* Price */}
                  <div class="text-center mb-8">
                    <div class="flex items-baseline justify-center gap-1">
                      <span class:list={[
                        'font-extrabold tracking-tight',
                        plan.popular ? 'text-5xl text-primary' : 'text-4xl'
                      ]}>
                        {plan.price}
                      </span>
                      <span class="text-lg text-muted-foreground">‚Ç∏</span>
                    </div>
                    <span class="text-sm text-muted-foreground">/{t.pricing.month}</span>
                  </div>

                  {/* Features */}
                  <ul class="space-y-4 mb-8">
                    <li class="flex items-center gap-3 pricing-feature" style="animation-delay: 0.3s">
                      <div class="w-5 h-5 rounded-full bg-green-500/20 flex items-center justify-center shrink-0">
                        <Check class="w-3 h-3 text-green-600" />
                      </div>
                      <span class="text-sm">{t.pricing.cities}</span>
                    </li>
                    <li class="flex items-center gap-3 pricing-feature" style="animation-delay: 0.4s">
                      <div class="w-5 h-5 rounded-full bg-green-500/20 flex items-center justify-center shrink-0">
                        <Check class="w-3 h-3 text-green-600" />
                      </div>
                      <span class="text-sm">{t.pricing.products.replace('{count}', plan.products.toString())}</span>
                    </li>
                    <li class="flex items-center gap-3 pricing-feature" style="animation-delay: 0.45s">
                      <div class="w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center shrink-0">
                        <Zap class="w-3 h-3 text-primary" />
                      </div>
                      <span class="text-sm font-medium text-primary">{t.pricing.turbo_products.replace('{count}', plan.turbo.toString())}</span>
                    </li>
                    <li class="flex items-center gap-3 pricing-feature" style="animation-delay: 0.5s">
                      <div class="w-5 h-5 rounded-full bg-green-500/20 flex items-center justify-center shrink-0">
                        <Check class="w-3 h-3 text-green-600" />
                      </div>
                      <span class="text-sm">{t.pricing.support}</span>
                    </li>
                  </ul>

                  {/* Button */}
                  <Button
                    class:list={[
                      'w-full pricing-button',
                      plan.popular ? 'shadow-lg shadow-primary/25' : ''
                    ]}
                    variant={plan.popular ? 'default' : 'outline'}
                    href={`${appUrl}/login`}
                  >
                    {t.pricing.choose}
                  </Button>
                </div>
              </Card>
            </div>
          ))}
        </div>
      </div>
    </section>

    <style>
      /* Pricing section animations */
      .pricing-fade-in {
        animation: pricingFadeIn 0.6s ease-out forwards;
        opacity: 0;
      }

      @keyframes pricingFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Card entrance animation */
      .pricing-card {
        animation: pricingCardIn 0.6s ease-out forwards;
        opacity: 0;
      }

      @keyframes pricingCardIn {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Card hover effect */
      .pricing-card:hover {
        transform: translateY(-8px);
      }

      .pricing-card {
        transition: transform 0.3s ease;
      }

      /* Popular card glow animation */
      .pricing-popular-card {
        animation: popularGlow 3s ease-in-out infinite;
      }

      @keyframes popularGlow {
        0%, 100% {
          box-shadow: 0 0 20px hsl(var(--primary) / 0.2), 0 25px 50px -12px hsl(var(--primary) / 0.25);
        }
        50% {
          box-shadow: 0 0 40px hsl(var(--primary) / 0.3), 0 25px 50px -12px hsl(var(--primary) / 0.35);
        }
      }

      /* Ribbon animation */
      .pricing-ribbon {
        animation: ribbonDrop 0.5s ease-out forwards;
        animation-delay: 0.4s;
        opacity: 0;
        transform: translateY(-10px);
      }

      @keyframes ribbonDrop {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Feature animation */
      .pricing-feature {
        animation: featureSlide 0.4s ease-out forwards;
        opacity: 0;
      }

      @keyframes featureSlide {
        from {
          opacity: 0;
          transform: translateX(-10px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* Button hover effect */
      .pricing-button {
        transition: all 0.3s ease;
      }

      .pricing-card:hover .pricing-button {
        transform: scale(1.02);
      }
    </style>

    <!-- FAQ Section -->
    <section class="py-20 overflow-hidden">
      <div class="container mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 faq-fade-in">
          {t.faq.title}
        </h2>
        <p class="text-xl text-muted-foreground text-center mb-12 faq-fade-in" style="animation-delay: 0.1s">
          –í—Å—ë –æ –∫–∞—Å–ø–∏ –±–æ—Ç–µ, –¥–µ–º–ø–∏–Ω–≥–µ –∏ –∞–≤—Ç–æ—Å–Ω–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω
        </p>
        <div class="max-w-3xl mx-auto space-y-3">
          {[
            { q: t.faq.q1.question, a: t.faq.q1.answer },
            { q: t.faq.q2.question, a: t.faq.q2.answer },
            { q: t.faq.q3.question, a: t.faq.q3.answer },
            { q: t.faq.q4.question, a: t.faq.q4.answer },
            { q: t.faq.q5.question, a: t.faq.q5.answer },
          ].map((item, index) => (
            <div
              class="faq-item border rounded-xl overflow-hidden bg-card hover:border-primary/50 transition-colors duration-300"
              style={`animation-delay: ${0.15 + index * 0.08}s`}
            >
              <button
                class="faq-trigger w-full px-6 py-5 flex items-center justify-between gap-4 text-left hover:bg-muted/50 transition-colors"
                type="button"
                aria-expanded="false"
              >
                <span class="text-lg font-medium">{item.q}</span>
                <div class="faq-icon w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0 transition-all duration-300">
                  <svg class="w-4 h-4 text-primary transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <polyline points="6 9 12 15 18 9"></polyline>
                  </svg>
                </div>
              </button>
              <div class="faq-content">
                <div class="px-6 pb-5 pt-0">
                  <p class="text-muted-foreground leading-relaxed">{item.a}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <style>
      /* FAQ animations */
      .faq-fade-in {
        animation: faqFadeIn 0.6s ease-out forwards;
        opacity: 0;
      }

      @keyframes faqFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .faq-item {
        animation: faqItemIn 0.5s ease-out forwards;
        opacity: 0;
      }

      @keyframes faqItemIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Accordion functionality */
      .faq-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        opacity: 0;
      }

      .faq-item.open .faq-content {
        max-height: 500px;
        opacity: 1;
      }

      .faq-item.open .faq-icon {
        background-color: hsl(var(--primary));
      }

      .faq-item.open .faq-icon svg {
        transform: rotate(180deg);
        color: hsl(var(--primary-foreground));
      }

      .faq-item.open {
        border-color: hsl(var(--primary) / 0.5);
        box-shadow: 0 4px 20px hsl(var(--primary) / 0.1);
      }
    </style>

    <script>
      document.querySelectorAll('.faq-trigger').forEach(button => {
        button.addEventListener('click', () => {
          const item = button.closest('.faq-item');
          const isOpen = item?.classList.contains('open');

          // Close all other items
          document.querySelectorAll('.faq-item.open').forEach(openItem => {
            if (openItem !== item) {
              openItem.classList.remove('open');
              openItem.querySelector('.faq-trigger')?.setAttribute('aria-expanded', 'false');
            }
          });

          // Toggle current item
          item?.classList.toggle('open');
          button.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
        });
      });
    </script>

    <!-- CTA Section -->
    <section class="py-20">
      <div class="container mx-auto px-4">
        <Card class="max-w-4xl mx-auto text-center p-8 bg-gradient-to-r from-[#D52027]/10 to-primary/10 border-[#D52027]/20">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            {t.cta.title}
          </h2>
          <p class="text-lg text-muted-foreground mb-6">
            {t.cta.subtitle}
          </p>
          <Button size="lg" class="text-lg" href={`${appUrl}/login`}>
            {t.cta.button}
          </Button>
          <p class="text-sm text-muted-foreground mt-4">
            {t.cta.trust}
          </p>
        </Card>
      </div>
    </section>

    <!-- Floating Contact Button -->
    <div class="fixed bottom-4 right-4 z-50 flex flex-col items-end gap-3" id="contact-fab">
      <!-- Main FAB button -->
      <button
        type="button"
        class="contact-fab-btn order-2 w-14 h-14 bg-primary hover:bg-primary/90 text-primary-foreground rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110 hover:shadow-xl"
        aria-label="Contact us"
      >
        <svg class="contact-icon-default w-6 h-6 transition-all duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
        </svg>
        <svg class="contact-icon-close w-6 h-6 absolute opacity-0 transition-all duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>

      <!-- Contact options (hidden by default) -->
      <div class="contact-options order-1 flex flex-col gap-3 opacity-0 pointer-events-none transition-all duration-300 translate-y-4">
        <!-- WhatsApp -->
        <a
          href={whatsappLink}
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-3 bg-green-500 hover:bg-green-600 text-white pl-4 pr-5 py-3 rounded-full shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl"
        >
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
          </svg>
          <span class="font-medium">WhatsApp</span>
        </a>

        <!-- Telegram (commented out for now)
        <a
          href={telegramLink}
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-3 bg-[#0088cc] hover:bg-[#0077b5] text-white pl-4 pr-5 py-3 rounded-full shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl"
        >
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
          </svg>
          <span class="font-medium">Telegram</span>
        </a>
        -->

        <!-- Phone -->
        <a
          href={`tel:${contactPhone}`}
          class="flex items-center gap-3 bg-primary hover:bg-primary/90 text-primary-foreground pl-4 pr-5 py-3 rounded-full shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl"
        >
          <Phone class="w-5 h-5" />
          <span class="font-medium">{contactPhone}</span>
        </a>
      </div>
    </div>

    <style>
      #contact-fab.open .contact-options {
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0);
      }

      #contact-fab.open .contact-icon-default {
        opacity: 0;
        transform: rotate(90deg);
      }

      #contact-fab.open .contact-icon-close {
        opacity: 1;
        transform: rotate(0deg);
      }

      .contact-fab-btn {
        position: relative;
      }

      /* Pulse animation for FAB */
      .contact-fab-btn::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 9999px;
        background: hsl(var(--primary));
        animation: fabPulse 2s ease-out infinite;
        z-index: -1;
      }

      @keyframes fabPulse {
        0% {
          transform: scale(1);
          opacity: 0.4;
        }
        100% {
          transform: scale(1.5);
          opacity: 0;
        }
      }
    </style>

    <script>
      const fab = document.getElementById('contact-fab');
      const fabBtn = fab?.querySelector('.contact-fab-btn');

      fabBtn?.addEventListener('click', () => {
        fab?.classList.toggle('open');
      });

      // Close when clicking outside
      document.addEventListener('click', (e) => {
        if (fab && !fab.contains(e.target as Node)) {
          fab.classList.remove('open');
        }
      });
    </script>

    <!-- Footer -->
    <footer class="border-t py-12 bg-muted/30">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto grid md:grid-cols-3 gap-8">
          <!-- Company Info -->
          <div class="flex flex-col gap-3">
            <Logo size="sm" />
            <p class="text-muted-foreground text-sm">–ò–ü UQB</p>
            <p class="text-muted-foreground text-sm">–≥. –ê—Å—Ç–∞–Ω–∞, —É–ª. –ê–±–µ–∫–µ–Ω –ë–µ–∫—Ç—É—Ä–æ–≤–∞</p>
          </div>

          <!-- Contact -->
          <div class="flex flex-col gap-3">
            <p class="font-medium text-sm">{t.footer.contact}</p>
            <a href={`tel:${contactPhone}`} class="flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors text-sm">
              <Phone class="w-4 h-4" />
              <span>{contactPhone}</span>
            </a>
            <a
              href={whatsappLink}
              target="_blank"
              rel="noopener noreferrer"
              class="flex items-center gap-2 text-green-600 hover:text-green-700 transition-colors text-sm"
            >
              <MessageCircle class="w-4 h-4" />
              <span>WhatsApp</span>
            </a>
            <!-- Telegram (commented out for now)
            <a
              href={telegramLink}
              target="_blank"
              rel="noopener noreferrer"
              class="flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors text-sm"
            >
              <MessageCircle class="w-4 h-4" />
              <span>Telegram</span>
            </a>
            -->
          </div>

          <!-- Legal -->
          <div class="flex flex-col gap-3">
            <p class="font-medium text-sm">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</p>
            <a href="/privacy" class="text-muted-foreground hover:text-foreground transition-colors text-sm">
              –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
            </a>
            <a href="/instructions" class="text-muted-foreground hover:text-foreground transition-colors text-sm">
              –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            </a>
          </div>
        </div>

        <div class="max-w-4xl mx-auto mt-8 pt-6 border-t">
          <p class="text-muted-foreground text-sm text-center">{t.footer.copyright}</p>
        </div>
      </div>
    </footer>
  </div>
</Layout>
